## TESSEN 프로젝트 디버깅 진행 상황 요약 (250923)

### 초기 목표
- `tessen_python` 스크립트에 `matplotlib`을 이용한 실시간 센서 데이터 그래프 기능을 추가하는 것이었습니다.

### 발견된 문제 및 해결 과정

1.  **1차 문제: Matplotlib GUI 백엔드 오류**
    *   **현상**: 그래프 기능 추가 후, 스크립트 실행 시 GUI 관련 스레드 오류 발생.
    *   **조치**: `matplotlib.use('TkAgg')` 코드를 추가하여 GUI 백엔드를 명시적으로 지정하여 해결했습니다.

2.  **2차 문제: 데이터 수신 대기 중 교착 상태(Deadlock)**
    *   **현상**: 스크립트가 "데이터 수신 중..." 메시지에서 멈추고 진행되지 않음.
    *   **원인**: `while` 루프를 사용한 대기 방식이 `asyncio` 이벤트 루프를 방해하여, 실제 데이터 수신 처리가 실행되지 못하는 문제였습니다.
    *   **조치**: `asyncio.Event`를 사용한 올바른 비동기 대기 방식으로 수정하여 해결했습니다.

3.  **3차 문제: 1Hz의 느린 데이터 수신 및 타임아웃**
    *   **현상**: 데이터가 1초에 한 번씩만 수신되어 타임아웃 발생.
    *   **원인**: 펌웨어(`main.c`) 코드에 의도적으로 데이터 전송을 10번에 1번만 하도록 제한하는 로직(`skip_count`)이 포함되어 있었습니다.

4.  **4차 문제: 블루투스 연결 후 데이터 수신 완전 중단 (핵심 원인)**
    *   **현상**: 블루투스가 연결된 직후, 펌웨어에서 데이터 생성 및 전송이 완전히 멈춤.
    *   **결정적 단서**: **"그래프를 넣기 전에는 문제가 없었다"**는 사용자님의 말씀.
    *   **최종 원인 분석**:
        *   그래프 기능으로 인해 Python 스크립트가 무거워지면서 펌웨어의 BLE 스택에 부하가 걸립니다.
        *   이 부하로 인해, BLE 통신과 센서 I2C 통신 간의 타이밍 충돌이 발생합니다.
        *   충돌로 센서 데이터 읽기에 실패하면, 펌웨어의 에러 처리 로직이 **센서 인터럽트(IRQ)를 영구적으로 비활성화**시켜 버리는 치명적인 버그가 있었습니다.

### 최종 시도 및 현재 상태
- 위의 분석을 바탕으로, 원래의 인터럽트(IRQ) 기반 펌웨어 코드에서 **(A) 인터럽트 비활성화 버그**와 **(B) 1Hz 속도 제한 버그**를 모두 수정한 최종 버전을 적용했습니다.
- 하지만 이 마지막 시도 역시 동일한 타임아웃 현상을 해결하지 못했습니다.

### 다음 계획
- 내일은 오늘 마지막으로 수정한 코드를 기반으로, 왜 여전히 인터럽트가 중단되는지 혹은 다른 문제가 있는지 로그를 통해 다시 한번 심층적으로 분석하여 문제 해결을 시도하겠습니다.
